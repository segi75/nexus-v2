<script setup lang="ts">
// ê³µí†µ ë³µì‚¬ ë¡œì§ ê°€ì ¸ì˜¤ê¸°
const { copiedId, copyCode } = useGuideCopy();
const isLoading = ref(false);

const startLoading = () => {
  isLoading.value = true;
  setTimeout(() => isLoading.value = false, 2000);
};
</script>

<template>
  <section class="guide-section">
    <div class="card basic-usage">
      <div class="card-header">
        <h3>ğŸš€ ê¸°ë³¸ ì‚¬ìš©ë²• (Basic Usage)</h3>
        <button 
          class="copy-btn-large" 
          @click="copyCode(`<NxButton label='ì €ì¥í•˜ê¸°' variant='primary' />`, 'btn-basic')"
        >
          {{ copiedId === 'btn-basic' ? 'âœ… ë³µì‚¬ì™„ë£Œ!' : 'ğŸ“‹ ì½”ë“œ ë³µì‚¬í•˜ê¸°' }}
        </button>
      </div>

      <div class="usage-row">
        <div class="preview-area">
          <NxButton label="ì €ì¥í•˜ê¸°" variant="primary" />
        </div>
        <div class="code-area">
&lt;NxButton 
  label="ì €ì¥í•˜ê¸°" 
  variant="primary" 
/&gt;
        </div>
      </div>
    </div>

    <div class="card detail-usage">
      <h3>ğŸ¨ 1. ìƒ‰ìƒ í…Œë§ˆ (variant)</h3>
      <table class="guide-table">
        <thead>
          <tr>
            <th width="150">ë¯¸ë¦¬ë³´ê¸°</th>
            <th>ì„¤ëª…</th>
            <th>ì½”ë“œ (í´ë¦­í•˜ì—¬ ë³µì‚¬)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><NxButton label="Primary" variant="primary" /></td>
            <td>ì£¼ìš” ì•¡ì…˜</td>
            <td>
              <button class="code-copy-row" @click="copyCode(`<NxButton label='ì €ì¥' variant='primary' />`, 'btn-pri')">
                <code>variant="primary"</code>
                <span class="icon">{{ copiedId === 'btn-pri' ? 'âœ…' : 'ğŸ“‹' }}</span>
              </button>
            </td>
          </tr>
          <tr>
            <td><NxButton label="Secondary" variant="secondary" /></td>
            <td>ë³´ì¡° ì•¡ì…˜</td>
            <td>
              <button class="code-copy-row" @click="copyCode(`<NxButton label='ì·¨ì†Œ' variant='secondary' />`, 'btn-sec')">
                <code>variant="secondary"</code>
                <span class="icon">{{ copiedId === 'btn-sec' ? 'âœ…' : 'ğŸ“‹' }}</span>
              </button>
            </td>
          </tr>
          <tr>
            <td><NxButton label="Danger" variant="danger" /></td>
            <td>ìœ„í—˜/ì‚­ì œ</td>
            <td>
              <button class="code-copy-row" @click="copyCode(`<NxButton label='ì‚­ì œ' variant='danger' />`, 'btn-dan')">
                <code>variant="danger"</code>
                <span class="icon">{{ copiedId === 'btn-dan' ? 'âœ…' : 'ğŸ“‹' }}</span>
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="divider"></div>

      <h3>âš¡ 2. ìƒíƒœ ë° ê¸°ëŠ¥</h3>
      <div class="usage-row">
        <div class="preview-area col-view">
          <div class="row-item">
            <NxButton :label="isLoading ? 'ì €ì¥ ì¤‘...' : 'ë¡œë”© í…ŒìŠ¤íŠ¸'" :loading="isLoading" @click="startLoading" />
            <span class="desc"><code>loading</code> ì†ì„±</span>
          </div>
          <div class="row-item">
            <NxButton label="ë¹„í™œì„±í™”" disabled />
            <span class="desc"><code>disabled</code> ì†ì„±</span>
          </div>
          <div class="row-item">
            <NxButton variant="primary">
              <template #prepend>ğŸ”</template> ì•„ì´ì½˜
            </NxButton>
            <span class="desc">Slot í™œìš©</span>
          </div>
        </div>
      </div>
    </div>
  </section>
</template>

<style scoped>
/* ê°€ì´ë“œ ì»´í¬ë„ŒíŠ¸ ì „ìš© ìŠ¤íƒ€ì¼ */
.guide-section { width: 100%; }
.card { background: white; border: 1px solid #dee2e6; border-radius: 8px; padding: 30px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.03); }
.card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
.card h3 { margin: 0; font-size: 1.1rem; color: #495057; }

/* ë³µì‚¬ ë²„íŠ¼ */
.copy-btn-large { background: #212529; color: #fff; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-weight: bold; transition: all 0.2s; }
.copy-btn-large:hover { background: #343a40; }

/* ì½”ë“œ ì˜ì—­ */
.usage-row { display: flex; gap: 20px; align-items: stretch; margin-top: 15px; }
.preview-area { flex: 1; display: flex; justify-content: center; align-items: center; background: #f8f9fa; padding: 20px; border-radius: 6px; border: 1px dashed #ced4da; }
.code-area { flex: 1.5; background: #282c34; color: #abb2bf; padding: 15px; border-radius: 6px; font-family: 'Consolas', monospace; font-size: 0.9rem; white-space: pre; overflow-x: auto; }

/* í…Œì´ë¸” */
.guide-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
.guide-table th { text-align: left; padding: 12px; background: #f8f9fa; border-bottom: 2px solid #dee2e6; font-weight: 600; color: #555; }
.guide-table td { padding: 12px; border-bottom: 1px solid #f1f3f5; vertical-align: middle; }

/* ì½”ë“œ ë³µì‚¬ í–‰ */
.code-copy-row { display: flex; align-items: center; justify-content: space-between; width: 100%; background: #f8f9fa; border: 1px solid #e9ecef; padding: 8px 12px; border-radius: 4px; cursor: pointer; text-align: left; font-family: inherit; color: inherit; }
.code-copy-row:hover { background: #e7f5ff; border-color: #74c0fc; }
.code-copy-row code { color: #c92a2a; font-family: 'Consolas', monospace; font-weight: bold; }

.divider { margin: 30px 0; border-top: 1px solid #eee; }
.col-view { flex-direction: column; align-items: flex-start; gap: 15px; }
.row-item { display: flex; align-items: center; gap: 15px; width: 100%; }
.desc { font-size: 0.85rem; color: #888; }
</style>