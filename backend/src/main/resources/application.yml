spring:
  application:
    name: nexus-backend

  # [중요] 리팩토링 시 빈(Bean) 이름 충돌 방지
  main:
    allow-bean-definition-overriding: true

  # [설정] 서블릿 인코딩
  servlet:
    encoding:
      charset: UTF-8
      enabled: true
      force: true

  # [설정] 멀티 데이터소스 (Core + Service)
  datasource:
    # 1. Core DB (MySQL)
    core:
      # [핵심] 경고 해결: com.mysql.jdbc.Driver -> com.mysql.cj.jdbc.Driver
      driver-class-name: com.mysql.cj.jdbc.Driver
      jdbc-url: ${SPRING_DATASOURCE_CORE_JDBC_URL:jdbc:mysql://localhost:3306/nexus_core?serverTimezone=Asia/Seoul&characterEncoding=UTF-8}
      username: ${SPRING_DATASOURCE_CORE_USERNAME:root}
      password: ${SPRING_DATASOURCE_CORE_PASSWORD:NexusPassword12!}
      hikari:
        pool-name: HikariPool-Core
        maximum-pool-size: 5

    # 2. Service DB (MSSQL)
    service:
      # MSSQL 드라이버
      driver-class-name: com.microsoft.sqlserver.jdbc.SQLServerDriver
      jdbc-url: ${SPRING_DATASOURCE_SERVICE_JDBC_URL:jdbc:sqlserver://localhost:14333;databaseName=nexus_service;encrypt=false}
      username: ${SPRING_DATASOURCE_SERVICE_USERNAME:sa}
      password: ${SPRING_DATASOURCE_SERVICE_PASSWORD:NexusPassword12!}
      hikari:
        pool-name: HikariPool-Service
        maximum-pool-size: 10

jwt:
  secret: "NEXUS_FRAMEWORK_V3_SECRET_KEY_MUST_BE_VERY_LONG_AND_SECURE_FOR_HS512"
  expiration: 3600000 # 1시간 (밀리초 단위)
  refresh-expiration: 86400000 # 24시간

# MyBatis 설정
mybatis:
  mapper-locations: classpath*:/mapper/**/*.xml
  configuration:
    map-underscore-to-camel-case: true
    default-executor-type: REUSE

# [중요] 포트 충돌 방지를 위해 8083으로 변경
server:
  port: 8083

# 로깅 설정
logging:
  level:
    root: INFO
    com.nexus: DEBUG
    
    # SQL 로그 관련 (필요 시 켜고 끄세요)
    log4jdbc.log4j2: WARN
    jdbc.sqlonly: OFF
    jdbc.sqltiming: INFO
    jdbc.audit: OFF
    jdbc.resultset: OFF
    jdbc.connection: OFF